<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <body>

        <ui:composition template="./../TemplateAdmininEgresados.xhtml">

            <ui:define name="top">
                <h:form>
                    <nav class="navbar navbar-utn">
                        <div class="container-fluid">
                            <div class="navbar-header">
                                <a class="navbar-brand" href="#">TAEG</a>
                            </div>
                            <ul class="nav navbar-nav">
                                <li ><h:link outcome="/vistas/iniciar_sesion/empresas_egresados.xhtml"  value="Aprobar"></h:link></li>
                                <li class="active"><h:link outcome="/vistas/egresados/empresas_desaprobar.xhtml"  value="Desaprobar"></h:link></li>


                            </ul>
                            <ul class="nav navbar-nav  navbar-right">
                                <!--<li><a href="#"><span class="glyphicon glyphicon-user"></span> Registrate</a></li>-->
                                <li><p:commandLink value="Cerrar sesión" actionListener="${beanSession.cerrarSesion()}" action="/vistas/iniciar_sesion/iniciar_sesion.xhtml?faces-redirect=true" ><span class="glyphicon glyphicon-log-out"></span></p:commandLink></li>

                            </ul>
                        </div>
                    </nav> 
                </h:form>
            </ui:define>

            <ui:define name="content">
                <p:messages id="mensajes"   showDetail="true" closable="true"/>
                <h:form id="formulario">
                    <center>
                        <p:panel id="form_view" rendered="${beanAdminEmpresasEgresados.renderForm}" style="width: 75%">
                            <h4 style="color: #038C65">Datos de la empresa</h4>
                            <h:panelGrid id="panel" columns="4" width="100%" cellspacing="5"   >
                                <h:panelGroup>
                                    <div style="margin-top: 20px">
                                        <h:outputText style=" font-weight: bold;" value="Nombre Empresa:"  /><br/>
                                        <h:outputText value="${beanAdminEmpresasEgresados.empresa.nombre_empresa}" />
                                    </div>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <div style="margin-top: 20px">
                                        <h:outputText style=" font-weight: bold;" value="Teléfono:"  /><br/>
                                        <h:outputText value="${beanAdminEmpresasEgresados.empresa.telefono}"  />
                                    </div>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <div style="margin-top: 20px">
                                        <h:outputText style=" font-weight: bold;" value="Correo:"   /><br/>
                                        <h:outputText   value="${beanAdminEmpresasEgresados.empresa.correo_empresa}"  />
                                    </div>
                                </h:panelGroup>

                                <h:panelGroup >
                                    <div style="margin-top: 15px">
                                        <h:outputText style=" font-weight: bold; " value="RFC:"  /><br/>
                                        <h:outputText value="${beanAdminEmpresasEgresados.empresa.rfc}" />
                                    </div>

                                </h:panelGroup>
                                <h:panelGroup>
                                    <div style="margin-top: 15px">
                                        <h:outputText style=" font-weight: bold;" value="Dirección:" /><br/>
                                        <h:outputText value="${beanAdminEmpresasEgresados.empresa.direccion}" />
                                    </div>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <div style="margin-top: 15px">
                                        <h:outputText style=" font-weight: bold;"  value="Estado:" /><br/>
                                        <h:outputText value="${beanAdminEmpresasEgresados.empresa.nombre_estado}" />
                                    </div>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <div style="margin-top: 15px">
                                        <h:outputText style=" font-weight: bold;" value="Municipio:" /><br/>
                                        <h:outputText value="${beanAdminEmpresasEgresados.empresa.nombre_ciudad}" />
                                    </div>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <div style="margin-top: 15px">
                                        <h:outputText style=" font-weight: bold;" value="Codigo Postal:"  /><br/>
                                        <h:outputText  value="${beanAdminEmpresasEgresados.empresa.codigo_postal}" />
                                    </div>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <div style="margin-top: 15px">
                                        <h:outputText style=" font-weight: bold;" value="Correo de empresa:"  /><br/>
                                        <h:outputText  value="${beanAdminEmpresasEgresados.empresa.correo_empresa}" />
                                    </div>
                                </h:panelGroup>
                            </h:panelGrid>
                            <hr style="color: #038C65;"></hr>

                            <h4 style="color: #038C65">Datos de Usuario</h4>
                            <h:panelGrid id="panel2" columns="4" width="100%" cellspacing="5"   >
                                <h:panelGroup>
                                    <div style="margin-top: 15px">
                                        <h:outputText style=" font-weight: bold;" value="Nombre de usuario:"  /><br/>
                                        <h:outputText  value="${beanAdminEmpresasEgresados.empresa.nombre}" />
                                    </div>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <div style="margin-top: 15px">
                                        <h:outputText style=" font-weight: bold;" value="Apellidos:"  /><br/>
                                        <h:outputText  value="${beanAdminEmpresasEgresados.empresa.apellidos}" />
                                    </div>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <div style="margin-top: 15px">
                                        <h:outputText style=" font-weight: bold;" value="Correo de Usuario:"  /><br/>
                                        <h:outputText  value="${beanAdminEmpresasEgresados.empresa.correo}" />
                                    </div>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <div style="margin-top: 15px">
                                        <h:outputText style=" font-weight: bold;" value="Usuario"  /><br/>
                                        <h:outputText  value="${beanAdminEmpresasEgresados.empresa.actividad}" />
                                    </div>
                                </h:panelGroup>

                            </h:panelGrid>

                            <p:commandButton id="botonCancelar"  style="margin-top: 30px;" value="Cancelar"
                                             actionListener="${beanAdminEmpresasEgresados.cancelar()}" process="@this" title="Cancelar"/>
                        </p:panel>
                    </center>
                    <center>
                        <h2 style="margin-top: 6%; color: #038C65">Desaprobar Empresas</h2><br/>
                    </center>
                    <div style="margin-left: 40px">
                         <p:outputLabel value="Empresa" for="buscaEmpresa" /><br/>
                        <p:autoComplete size="40" id="buscaEmpresa" 
                                        value="#{beanAdminEmpresasEgresados.selectedEmpresa}" 
                                        completeMethod="#{beanAdminEmpresasEgresados.muestraEmpresasAprobadas}"
                                        var="company" itemLabel="#{company.nombre_empresa}" 
                                        itemValue="#{company}" converter="empresaConverterAdminAprob" 
                                        forceSelection="true" >

                        </p:autoComplete>
                         <p:commandButton value="Buscar" actionListener="${beanAdminEmpresasEgresados.buscarAprob()}" 
                                         style="margin-left: 10px; "/>


                    </div>
                    <center>
                        <div style="width: 95%">
                            <p:dataTable id="data_table" rendered="true" var="empresa"
                                         value="${beanAdminEmpresasEgresados.empresasAprobadas}"
                                         style="margin-top: 10px">
                                <p:column headerText="Nombre">
                                    <h:outputText value="${empresa.nombre_empresa}" />
                                </p:column>

                                <p:column headerText="Dirección">
                                    <h:outputText value="${empresa.direccion}" />
                                </p:column>

                                <p:column headerText="Teléfono">
                                    <h:outputText value="${empresa.telefono}"/>
                                </p:column>

                                <p:column headerText="Correo">
                                    <h:outputText value="${empresa.correo_empresa}"/>
                                </p:column>

                                <p:column headerText="Opciones">
                                    <center>
                                        <p:commandButton id="botonVer"  style="margin-top: 20px; " value="Ver" 
                                                         process="@this" actionListener="${beanAdminEmpresasEgresados.ver(empresa)}" />
                                        <p:commandButton id="botonAprobar"  style="margin-top: 20px; " value="Desaprobar" 
                                                         process="@this" 
                                                         actionListener="${beanAdminEmpresasEgresados.desaprobarEmpresa(empresa)}" > 
                                            <p:confirm header="¡Atención!" icon="pi pi-exclamation-triangle"
                                                       message="¿Está seguro que desea desaprobar esta empresa?"
                                                       ></p:confirm>
                                        </p:commandButton>
                                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" >
                                            <p:commandButton value="Aceptar" type="button" styleClass="ui-confirmdialog-yes"/>
                                            <p:commandButton value="Cancelar" type="button" styleClass="ui-confirmdialog-no" />
                                        </p:confirmDialog>
                                    </center>

                                </p:column>
                            </p:dataTable>

                        </div>
                    </center>
                    <script type="text/javascript">
                        function ocultaMsj(time) {
                            setTimeout(function () {
                                $("#mensajes").children("div").slideUp();
                                return false;
                            }, time);
                        }
                        function subir() {
                            //referimos el elemento ( clase o identificador de acción )
                            $('html, body').animate({scrollTop: 0}, 'slow'); //seleccionamos etiquetas,clase o identificador destino, creamos animación hacia top de la página.
                        }
                    </script>


                </h:form>

            </ui:define>

            <ui:define name="bottom">

            </ui:define>

        </ui:composition>

    </body>
</html>
